# Node.js API

A simple REST API built with Node.js, Prisma, and Axios, focused on managing a User table. This project serves as a practical exercise in API development, database interaction, and external API consumption.

## Getting Started

### Prerequisites

Before running the project, ensure you have the following installed:

- Node.js Node.js v22.12.0+
- npm (Node Package Manager)
- A database MongoDB

### Installation

1.  Clone the repository:

    ```bash
    git clone [https://github.com/OlaiaAly/api-node.git](https://github.com/OlaiaAly/v.git)

    cd api-node
    ```

2.  Install dependencies:

    ```bash
    npm install  # or yarn install
    ```

3.  Database setup:

    - Explain how to set up the database connection. This is _crucial_. For example:
      - "Create a database named `your_database_name` in your database system."
      - "Configure the database connection details in the `.env` file." (If you're using environment variables â€“ recommended). Provide a `.env.example` for users to copy and adapt.
      - "Run Prisma migrations: `npx prisma migrate dev`"

### Running the API

```bash
npm run dev  # or yarn dev
```

# User Management API

This API provides endpoints for managing users using Express and Prisma.

## Endpoints

### 1. GET /users

- **Description:** Retrieves a list of users. Supports filtering by name, email, or phone number.
- **Method:** `GET`
- **Parameters (Query):**
  - `name` (string, optional): Filters users by name (case-insensitive, partial match).
  - `email` (string, optional): Filters users by email (case-insensitive, partial match).
  - `phoneNumber` (string, optional): Filters users by phone number (partial match).
- **Response:**

  - `200 OK`: Returns an array of user objects (JSON). Example:

    ```json
    [
      {
        "id": "cll4mwkfz0000000000000000",
        "name": "John Doe",
        "email": "[email address removed]",
        "phoneNumber": "123-456-7890"
      },
      {
        "id": "cll4mwl000001000000000001",
        "name": "Jane Doe",
        "email": "[email address removed]",
        "phoneNumber": "987-654-3210"
      }
    ]
    ```

  - `500 Internal Server Error`: If there's an error retrieving users. Example:

    ```json
    {
      "error": "Failed to get users"
    }
    ```

### 2. GET /users/:id

- **Description:** Retrieves a single user by their ID.
- **Method:** `GET`
- **Parameters (Path):**
  - `id` (string, required): The unique ID of the user.
- **Response:**

  - `200 OK`: Returns the user object (JSON). Example:

    ```json
    {
      "id": "cll4mwkfz0000000000000000",
      "name": "John Doe",
      "email": "[email address removed]",
      "phoneNumber": "123-456-7890"
    }
    ```

  - `404 Not Found`: If the user with the given ID is not found. Example:

    ```json
    {
      "error": "User not found"
    }
    ```

  - `500 Internal Server Error`: If there's an error retrieving the user. Example:

    ```json
    {
      "error": "Failed to get user"
    }
    ```

### 3. POST /users

- **Description:** Creates a new user.
- **Method:** `POST`
- **Request Body:** A JSON object representing the new user. Example:

  ```json
  {
    "name": "New User",
    "email": "[email address removed]",
    "phoneNumber": "555-123-4567"
  }
  ```

- **Response:**

  - `201 Created`: Returns the newly created user object (JSON). Example:

    ```json
    {
      "id": "cll4n00000002000000000002", // New ID generated by the database
      "name": "New User",
      "email": "[email address removed]",
      "phoneNumber": "555-123-4567"
    }
    ```

  - `500 Internal Server Error`: If there's an error creating the user. Example:

    ```json
    {
      "error": "Failed to create user"
    }
    ```

### 4. PUT /users/:id

- **Description:** Updates an existing user.
- **Method:** `PUT`
- **Parameters (Path):**
  - `id` (string, required): The unique ID of the user to update.
- **Request Body:** A JSON object representing the updated user data. Example:

  ```json
  {
    "name": "Updated User Name",
    "email": "[email address removed]"
  }
  ```

- **Response:**

  - `200 OK`: Returns the updated user object (JSON). Example:

    ```json
    {
      "id": "cll4mwkfz0000000000000000",
      "name": "Updated User Name",
      "email": "[email address removed]",
      "phoneNumber": "123-456-7890" // phoneNumber remains unchanged
    }
    ```

  - `500 Internal Server Error`: If there's an error updating the user. Example:

    ```json
    {
      "error": "Failed to update user"
    }
    ```

### 5. DELETE /users/:id

- **Description:** Deletes a user.
- **Method:** `DELETE`
- **Parameters (Path):**
  - `id` (string, required): The unique ID of the user to delete.
- **Response:**

  - `204 No Content`: Indicates successful deletion. No response body is typically sent.
  - `500 Internal Server Error`: If there's an error deleting the user. Example:

    ```json
    {
      "error": "Failed to delete user"
    }
    ```

### 6. GET /

- **Description:** Welcome route. Provides a basic welcome message.
- **Method:** `GET`
- **Response:**

  - `200 OK`: Returns a welcome message (text). Example:

    ```
    Welcome to the Prisma API
    ```

## General Notes

- All routes related to users (`/users`, `/users/:id`) operate on user data.
- The API uses JSON for request and response bodies.
- Error responses are also in JSON format, typically including an `error` field with a description of the error.
- The API uses standard HTTP status codes to indicate the success or failure of requests.
- The search functionality for `GET /users` is case-insensitive for name and email.
